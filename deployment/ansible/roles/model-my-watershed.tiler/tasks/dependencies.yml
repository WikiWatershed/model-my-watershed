---
- name: Install canvas rendering dependencies
  apt: pkg={{ item }} state=present
  with_items:
    - "libcairo2-dev=1.14.*"
    - "libpango1.0-dev=1.38.*"
    - "libjpeg8-dev=8c-*"
    - "libgif-dev=5.1.*"

- name: Install Mapnik dependencies
  apt: pkg={{ item }} state=present
  with_items:
    - "libmapnik3.0=3.0.*"
    - "libmapnik-dev=3.0.*"
    - "mapnik-utils=3.0.*"
    - "python-mapnik=1:0.0~20151125-92e79d2-1build1"

- name: Install Windshaft JavaScript dependencies
  command: npm install --unsafe-perm
  args:
    chdir: "{{ tiler_home }}"
  environment:
    PKG_CONFIG_PATH: "/usr/lib/pkgconfig/pycairo.pc"
  become: False
